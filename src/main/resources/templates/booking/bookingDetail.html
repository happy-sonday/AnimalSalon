<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta id="_csrf" name="_csrf" th:content="${_csrf.token}" />
<meta id="_csrf_header" name="_csrf_header" th:content="${_csrf.headerName}" />
<title>예약하기</title>
<link rel="stylesheet" th:href="@{/static/datepicker/jquery-ui.css}">
<link rel="stylesheet" th:href="@{'/static/css/main/bootstrap.min.css'}">
<link rel="stylesheet" th:href="@{'/static/css/main/booking.css'}">
</head>
<body>
	<!-- bookingHomeSubHeader 삽입 -->
	<div th:insert="~{booking/sub/bookingSubHeader::bookingSubHeader}"></div>

	<!-- 메뉴선택 -->
	<form th:action="@{/payments}" method="POST">
	<div class="container" style="padding-top: 30px; padding-bottom: 20px;">
		<div class="row pb-3 border-bottom border-gray">
			<div class="col-5 border-right border-gray">
				<!-- 메뉴정보 -->
				<div class="media pt-3">
					<input type="hidden" th:value="${menu.mCode}" id="mCode" name="mCode">
					<img th:src="@{'/menu/upload_image/' + ${menu.mpPath} + ${menu.mpSysName}}" width="100" height="80" alt="메뉴사진" />
					<p class="media-body pl-4 pb-3 mt-4 small lh-125 border-bottom border-gray">
					<strong class="d-block text-gray-dark" style="font-size: 16px;">[[${menu.mName}]]</strong>
					[[${menu.mInfo}]]</p>
				</div>

				<!-- 메뉴옵션 -->
				<div>
					<select th:if="${not #lists.isEmpty(menuOptions)}" id="optionList" class="custom-select"
						name="optionList" onchange="change_sum_price(this);">
						<option value="x" disabled="disabled" selected="selected">옵션을 선택해주세요.</option>
						<option th:each="option : ${menuOptions}" th:value="|${option.oTime}:${option.oPrice}|" th:text="${option.oName}"></option>
					</select>
					<input type="hidden" th:value="${menu.mPrice}" id="defaultPrice" name="defaultPrice">
					<input type="hidden" th:value="${menu.mTime}"id="defaultBeautyTime" name="defaultBeautyTime">

					<p class="media-body pb-3 mt-3 border-bottom border-gray">
					금액 <strong th:text="|${menu.mPrice}원|" th:value="${menu.mPrice}" id="sumPrice"></strong><br />
					소요시간 <strong th:text="|${menu.mTime}분|" th:value="${menu.mTime}" id="sumBeautyTime"></strong>
					</p>
				</div>
				
				<!-- 날짜선택 -->
				<div>
					<span class="pb-3 pr-4" style="float: right; font-weight: bold;">예약 날짜</span>
					<input type="text" id="bookingDate" name="bookingDate" onchange="change_booking_date(this);">
				</div>
			</div>

			<!-- 디자이너 및 시간 선택 -->
			<div class="col-7" id="custom-scrollbar-css">
				<input type="hidden" th:value="${shop.sCode}" id="sCode" name="sCode">
				<input type="hidden" th:value="${shop.sName}" id="sName">
				<input type="hidden" th:value="${shop.sPhone}" id="sPhone">
				<input type="hidden" th:value="${shop.sTime}" id="sTime">
				<input type="hidden" value="" id="selected_designer" name="selected_designer">
				<input type="hidden" value="" id="selected_date" name="selected_date">
				
				<div th:each="dList, i: ${designers}" class="mb-3">
					<div class="media">
						<input type="hidden" th:value="${dList.dCode}" th:id="dCode + ${i.index}">
						<input type="hidden" th:value="${dList.dDayOff}" id="dDayOff">
						<img th:src="@{'/upload_image/'+${dList.dPhotopath}+${dList.dPhotoname}}" width=60 height=60 class="rounded-circle" />
						<p class="media-body pl-3 pb-2 mt-1 small lh-125 border-bottom border-gray">
						<strong class="d-block text-gray-dark" style="font-size: 16px;" th:text="${dList.dName}" id="dName"></strong>
						<span th:text="${dList.dInfo}"></span></p>
					</div>
					
					<!-- 시간제어 (정기휴무 및 예약불가목록) -->
					<div th:id="bookable_time + ${i.index}">

					</div>
				</div>
			</div>
		</div>

		<!-- 기타 세부사항 (상품고시, 거래정보, 예약환불규정은 버튼 클릭 시 펼쳐지게)-->
		<div class="row mt-3">
			<ul>
				<li>상품고시▼</li>
				<li>거래정보▼</li>
				<li>예약환불규정▼</li>
			</ul>
			<input type="button" value="예약하기(테스트)" onclick="make_booking();">
			<input type="submit" value="예약하기(결제와연동)">
		</div>
	</div>
	</form>

	<!-- footer -->
	<div th:insert="~{booking/sub/footer::footer}"></div>

	<script th:src="@{/static/js/jquery-3.5.1.min.js}" type="text/javascript"></script>
	<script th:src="@{/static/js/bootstrap.bundle.min.js}" charset="UTF-8"></script>
	<script th:src="@{/static/datepicker/jquery-ui.js}" type="text/javascript"></script>
	<script th:src="@{/static/js/booking/booking.js}" type="text/javascript"></script>
	<script th:src="@{/static/js/shop/shop_search_my.js}" type="text/javascript"></script>

</body>
</html>